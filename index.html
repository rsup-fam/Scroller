<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script
  src="https://code.jquery.com/jquery-2.2.4.js"
  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
  crossorigin="anonymous"></script>
  <title>Scroller Test</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    .section {
      height: 100vh;
      margin-bottom: 30px;
    }
    .navigator {
      position: fixed;
      display: inline-block;
      padding: 25px 0;
      min-width: 200px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      text-align: center;
      transition: all 1.25s ease-in-out;
    }
  </style>
</head>
<body>
  
  <div class="navigator"></div>

  <div id="section1" class="section">
    <div class="ball"></div>
  </div>
  <div id="section2" class="section"></div>
  <div id="section3" class="section"></div>
  <div id="section4" class="section"></div>
  <div id="section5" class="section"></div>
  <script src="./js/scroller.js"></script>

  <script>
    
    // window.addEventListener('scroll', function() {
      
    //   var scrollY = window.pageYOffset || window.scrollY;
      
    //   if(el.offsetTop > scrollY)
    //   ... 
    //   ...
    // });
    
    /*
      1. 문제점
        - scroll 이벤트가 발생 할 때 마다 el의 offset값을 찾아야함. (효율적x)
        - 해당 영역의 이벤트 코드가 많아 질 수록 가독성이 떨어짐.
        - 매번 스크롤 이벤트를 개발할 때 마다 같은 코드를 여러번 작성해야함.
    */
  </script>



  <script>
    function getRgbColor() {
      
      var arr = [];

      for(var i = 0; i < 3; i++) {
        arr.push(parseInt(Math.random() * 255, 10));
      }
      
      return 'rgb(' + arr[0] + ', ' + arr[1] + ', ' + arr[2] + ')';
    }

    Array.prototype.forEach.call(document.querySelectorAll('.section'), function(section) {

      section.style.backgroundColor = getRgbColor();
    });

    var scroller = new Scroller();
    var navigatorEl = document.querySelector('.navigator');

    scroller.add({
      el: '#section1',
      start: function() {
        navigatorEl.innerText = '#section1 start callback';
      },
      end: function() {
        navigatorEl.innerText = '#section1 end callback';
      }
    }).add({
      el: '#section2',
      start: function() {
        navigatorEl.innerText = '#section2 start callback';
      },
      end: function() {
        navigatorEl.innerText = '#section2 end callback';
      }
    }).add({
      el: '#section3',
      start: function() {
        navigatorEl.innerText = '#section3 start callback';
      },
      end: function() {
        navigatorEl.innerText = '#section3 end callback';
      }
    }).add({
      el: '#section4',
      start: function() {
        navigatorEl.innerText = '#section4 start callback';
      },
      end: function() {
        navigatorEl.innerText = '#section4 end callback';
      }
    }).add({
      el: '#section5',
      start: function() {
        navigatorEl.innerText = '#section5 start callback';
      },
      end: function() {
        navigatorEl.innerText = '#section5 end callback';
      }
    });

    
  </script>
</body>
</html>